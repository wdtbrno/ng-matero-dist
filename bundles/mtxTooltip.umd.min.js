!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/overlay"),require("@angular/cdk/a11y"),require("@angular/common"),require("@angular/core"),require("@angular/material/core"),require("@angular/cdk/scrolling"),require("@angular/cdk/bidi"),require("@angular/cdk/coercion"),require("@angular/cdk/keycodes"),require("@angular/cdk/layout"),require("@angular/cdk/platform"),require("@angular/cdk/portal"),require("rxjs"),require("rxjs/operators"),require("@angular/animations")):"function"==typeof define&&define.amd?define("@ng-matero/extensions/tooltip",["exports","@angular/cdk/overlay","@angular/cdk/a11y","@angular/common","@angular/core","@angular/material/core","@angular/cdk/scrolling","@angular/cdk/bidi","@angular/cdk/coercion","@angular/cdk/keycodes","@angular/cdk/layout","@angular/cdk/platform","@angular/cdk/portal","rxjs","rxjs/operators","@angular/animations"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self)["ng-matero"]=t["ng-matero"]||{},t["ng-matero"].extensions=t["ng-matero"].extensions||{},t["ng-matero"].extensions.tooltip={}),t.ng.cdk.overlay,t.ng.cdk.a11y,t.ng.common,t.ng.core,t.ng.material.core,t.ng.cdk.scrolling,t.ng.cdk.bidi,t.ng.cdk.coercion,t.ng.cdk.keycodes,t.ng.cdk.layout,t.ng.cdk.platform,t.ng.cdk.portal,t.rxjs,t.rxjs.operators,t.ng.animations)}(this,(function(t,e,i,o,s,n,r,a,l,p,c,h,u,d,_,f){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */Object.create;function y(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,s,n=i.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=n.next()).done;)r.push(o.value)}catch(t){s={error:t}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return r}Object.create;var m={tooltipState:f.trigger("state",[f.state("initial, void, hidden",f.style({opacity:0,transform:"scale(0)"})),f.state("visible",f.style({transform:"scale(1)"})),f.transition("* => visible",f.animate("200ms cubic-bezier(0, 0, 0.2, 1)",f.keyframes([f.style({opacity:0,transform:"scale(0)",offset:0}),f.style({opacity:.5,transform:"scale(0.99)",offset:.5}),f.style({opacity:1,transform:"scale(1)",offset:1})]))),f.transition("* => hidden",f.animate("100ms cubic-bezier(0, 0, 0.2, 1)",f.style({opacity:0})))])},g="mtx-tooltip-panel",v=h.normalizePassiveListenerOptions({passive:!0});function b(t){return Error('Tooltip position "'+t+'" is invalid.')}var T=new s.InjectionToken("mtx-tooltip-scroll-strategy");function I(t){return function(){return t.scrollStrategies.reposition({scrollThrottle:20})}}var O={provide:T,deps:[e.Overlay],useFactory:I},k=new s.InjectionToken("mtx-tooltip-default-options",{providedIn:"root",factory:x});function x(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var w=function(){function t(t,e,i,o,s,n,r,a,l,c,h){var u=this;this._overlay=t,this._elementRef=e,this._scrollDispatcher=i,this._viewContainerRef=o,this._ngZone=s,this._platform=n,this._ariaDescriber=r,this._focusMonitor=a,this._dir=c,this._defaultOptions=h,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new d.Subject,this._handleKeydown=function(t){u._isTooltipVisible()&&t.keyCode===p.ESCAPE&&!p.hasModifierKey(t)&&(t.preventDefault(),t.stopPropagation(),u._ngZone.run((function(){return u.hide(0)})))},this._scrollStrategy=l,h&&(h.position&&(this.position=h.position),h.touchGestures&&(this.touchGestures=h.touchGestures)),s.runOutsideAngular((function(){e.nativeElement.addEventListener("keydown",u._handleKeydown)}))}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&this._tooltipInstance.show(0),this._overlayRef.updatePosition()))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=l.coerceBooleanProperty(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this._message},set:function(t){var e=this;this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message),this._message=t instanceof s.TemplateRef?t:null!=t?(""+t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular((function(){Promise.resolve().then((function(){e._ariaDescriber.describe(e._elementRef.nativeElement,e.message)}))})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tooltipClass",{get:function(){return this._tooltipClass},set:function(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){var t=this;this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(_.takeUntil(this._destroyed)).subscribe((function(e){e?"keyboard"===e&&t._ngZone.run((function(){return t.show()})):t._ngZone.run((function(){return t.hide(0)}))}))},t.prototype.ngOnDestroy=function(){var t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),t.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach((function(e){var i=y(e,2),o=i[0],s=i[1];t.removeEventListener(o,s,v)})),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message),this._focusMonitor.stopMonitoring(t)},t.prototype.show=function(t){var e=this;if(void 0===t&&(t=this.showDelay),!this.disabled&&this.message&&(!this._isTooltipVisible()||this._tooltipInstance._showTimeoutId||this._tooltipInstance._hideTimeoutId)){var i=this._createOverlay();this._detach(),this._portal=this._portal||new u.ComponentPortal(E,this._viewContainerRef),this._tooltipInstance=i.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(_.takeUntil(this._destroyed)).subscribe((function(){return e._detach()})),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(t)}},t.prototype.hide=function(t){void 0===t&&(t=this.hideDelay),this._tooltipInstance&&this._tooltipInstance.hide(t)},t.prototype.toggle=function(){this._isTooltipVisible()?this.hide():this.show()},t.prototype._isTooltipVisible=function(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()},t.prototype._createOverlay=function(){var t=this;if(this._overlayRef)return this._overlayRef;var e=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),i=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(".mtx-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withScrollableContainers(e);return i.positionChanges.pipe(_.takeUntil(this._destroyed)).subscribe((function(e){t._tooltipInstance&&e.scrollableViewProperties.isOverlayClipped&&t._tooltipInstance.isVisible()&&t._ngZone.run((function(){return t.hide(0)}))})),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:i,panelClass:g,scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(_.takeUntil(this._destroyed)).subscribe((function(){return t._detach()})),this._overlayRef},t.prototype._detach=function(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null},t.prototype._updatePosition=function(){var t=this._overlayRef.getConfig().positionStrategy,e=this._getOrigin(),i=this._getOverlayPosition();t.withPositions([Object.assign(Object.assign({},e.main),i.main),Object.assign(Object.assign({},e.fallback),i.fallback)])},t.prototype._getOrigin=function(){var t,e=!this._dir||"ltr"===this._dir.value,i=this.position;if("above"===i||"below"===i)t={originX:"center",originY:"above"===i?"top":"bottom"};else if("before"===i||"left"===i&&e||"right"===i&&!e)t={originX:"start",originY:"center"};else{if(!("after"===i||"right"===i&&e||"left"===i&&!e))throw b(i);t={originX:"end",originY:"center"}}var o=this._invertPosition(t.originX,t.originY);return{main:t,fallback:{originX:o.x,originY:o.y}}},t.prototype._getOverlayPosition=function(){var t,e=!this._dir||"ltr"===this._dir.value,i=this.position;if("above"===i)t={overlayX:"center",overlayY:"bottom"};else if("below"===i)t={overlayX:"center",overlayY:"top"};else if("before"===i||"left"===i&&e||"right"===i&&!e)t={overlayX:"end",overlayY:"center"};else{if(!("after"===i||"right"===i&&e||"left"===i&&!e))throw b(i);t={overlayX:"start",overlayY:"center"}}var o=this._invertPosition(t.overlayX,t.overlayY);return{main:t,fallback:{overlayX:o.x,overlayY:o.y}}},t.prototype._updateTooltipMessage=function(){var t=this;this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.asObservable().pipe(_.take(1),_.takeUntil(this._destroyed)).subscribe((function(){t._tooltipInstance&&t._overlayRef.updatePosition()})))},t.prototype._setTooltipClass=function(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())},t.prototype._invertPosition=function(t,e){return"above"===this.position||"below"===this.position?"top"===e?e="bottom":"bottom"===e&&(e="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:e}},t.prototype._setupPointerEnterEventsIfNeeded=function(){var t=this;!this._disabled&&this.message&&this._viewInitialized&&!this._passiveListeners.length&&(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",function(){t._setupPointerExitEventsIfNeeded(),t.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",function(){t._setupPointerExitEventsIfNeeded(),clearTimeout(t._touchstartTimeout),t._touchstartTimeout=setTimeout((function(){return t.show()}),500)}])),this._addListeners(this._passiveListeners))},t.prototype._setupPointerExitEventsIfNeeded=function(){var t,e=this;if(!this._pointerExitEventsInitialized){this._pointerExitEventsInitialized=!0;var i=[];if(this._platformSupportsMouseEvents())i.push(["mouseleave",function(){return e.hide()}]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();var o=function(){clearTimeout(e._touchstartTimeout),e.hide(e._defaultOptions.touchendHideDelay)};i.push(["touchend",o],["touchcancel",o])}this._addListeners(i),(t=this._passiveListeners).push.apply(t,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(y(arguments[e]));return t}(i))}},t.prototype._addListeners=function(t){var e=this;t.forEach((function(t){var i=y(t,2),o=i[0],s=i[1];e._elementRef.nativeElement.addEventListener(o,s,v)}))},t.prototype._platformSupportsMouseEvents=function(){return!this._platform.IOS&&!this._platform.ANDROID},t.prototype._disableNativeGesturesIfNecessary=function(){var t=this.touchGestures;if("off"!==t){var e=this._elementRef.nativeElement,i=e.style;("on"===t||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName)&&(i.userSelect=i.msUserSelect=i.webkitUserSelect=i.MozUserSelect="none"),"on"!==t&&e.draggable||(i.webkitUserDrag="none"),i.touchAction="none",i.webkitTapHighlightColor="transparent"}},t}();w.decorators=[{type:s.Directive,args:[{selector:"[mtxTooltip]",exportAs:"mtxTooltip",host:{class:"mtx-tooltip-trigger"}}]}],w.ctorParameters=function(){return[{type:e.Overlay},{type:s.ElementRef},{type:r.ScrollDispatcher},{type:s.ViewContainerRef},{type:s.NgZone},{type:h.Platform},{type:i.AriaDescriber},{type:i.FocusMonitor},{type:void 0,decorators:[{type:s.Inject,args:[T]}]},{type:a.Directionality,decorators:[{type:s.Optional}]},{type:void 0,decorators:[{type:s.Optional},{type:s.Inject,args:[k]}]}]},w.propDecorators={position:[{type:s.Input,args:["mtxTooltipPosition"]}],disabled:[{type:s.Input,args:["mtxTooltipDisabled"]}],showDelay:[{type:s.Input,args:["mtxTooltipShowDelay"]}],hideDelay:[{type:s.Input,args:["mtxTooltipHideDelay"]}],touchGestures:[{type:s.Input,args:["mtxTooltipTouchGestures"]}],message:[{type:s.Input,args:["mtxTooltip"]}],tooltipClass:[{type:s.Input,args:["mtxTooltipClass"]}]};var E=function(){function t(t,e){this._changeDetectorRef=t,this._breakpointObserver=e,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new d.Subject,this._isHandset=this._breakpointObserver.observe(c.Breakpoints.Handset)}return t.prototype._isTemplateRef=function(t){return t instanceof s.TemplateRef},t.prototype.show=function(t){var e=this;this._hideTimeoutId&&(clearTimeout(this._hideTimeoutId),this._hideTimeoutId=null),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout((function(){e._visibility="visible",e._showTimeoutId=null,e._markForCheck()}),t)},t.prototype.hide=function(t){var e=this;this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=null),this._hideTimeoutId=setTimeout((function(){e._visibility="hidden",e._hideTimeoutId=null,e._markForCheck()}),t)},t.prototype.afterHidden=function(){return this._onHide.asObservable()},t.prototype.isVisible=function(){return"visible"===this._visibility},t.prototype.ngOnDestroy=function(){this._onHide.complete()},t.prototype._animationStart=function(){this._closeOnInteraction=!1},t.prototype._animationDone=function(t){var e=t.toState;"hidden"!==e||this.isVisible()||this._onHide.next(),"visible"!==e&&"hidden"!==e||(this._closeOnInteraction=!0)},t.prototype._handleBodyInteraction=function(){this._closeOnInteraction&&this.hide(0)},t.prototype._markForCheck=function(){this._changeDetectorRef.markForCheck()},t}();E.decorators=[{type:s.Component,args:[{selector:"mtx-tooltip-component",template:'<div class="mtx-tooltip"\n     [ngClass]="tooltipClass"\n     [class.mtx-tooltip-handset]="(_isHandset | async)?.matches"\n     [@state]="_visibility"\n     (@state.start)="_animationStart()"\n     (@state.done)="_animationDone($event)">\n  <ng-template [ngIf]="_isTemplateRef(message)" [ngIfElse]="msgStrTpl">\n    <ng-template [ngTemplateOutlet]="$any(message)"></ng-template>\n  </ng-template>\n  <ng-template #msgStrTpl>{{message}}</ng-template>\n</div>\n',encapsulation:s.ViewEncapsulation.None,changeDetection:s.ChangeDetectionStrategy.OnPush,animations:[m.tooltipState],host:{"[style.zoom]":'_visibility === "visible" ? 1 : null',"(body:click)":"this._handleBodyInteraction()","aria-hidden":"true"},styles:[".mtx-tooltip-panel{pointer-events:none!important}.mtx-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mtx-tooltip{outline:1px solid}.mtx-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}"]}]}],E.ctorParameters=function(){return[{type:s.ChangeDetectorRef},{type:c.BreakpointObserver}]};var C=function(){};C.decorators=[{type:s.NgModule,args:[{imports:[i.A11yModule,o.CommonModule,e.OverlayModule,n.MatCommonModule],exports:[w,E,n.MatCommonModule,r.CdkScrollableModule],declarations:[w,E],entryComponents:[E],providers:[O]}]}],t.MTX_TOOLTIP_DEFAULT_OPTIONS=k,t.MTX_TOOLTIP_DEFAULT_OPTIONS_FACTORY=x,t.MTX_TOOLTIP_SCROLL_STRATEGY=T,t.MTX_TOOLTIP_SCROLL_STRATEGY_FACTORY=I,t.MTX_TOOLTIP_SCROLL_STRATEGY_FACTORY_PROVIDER=O,t.MtxTooltip=w,t.MtxTooltipModule=C,t.SCROLL_THROTTLE_MS=20,t.TOOLTIP_PANEL_CLASS=g,t.TooltipComponent=E,t.getMtxTooltipInvalidPositionError=b,t.mtxTooltipAnimations=m,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=mtxTooltip.umd.min.js.map